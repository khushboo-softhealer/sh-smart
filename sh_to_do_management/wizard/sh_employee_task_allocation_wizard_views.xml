<?xml version="1.0"?>
<odoo>
    <record id="sh_employee_task_allocation_wizard_form_view" model="ir.ui.view">
        <field name="name">sh.employee.task.allocation.wizard.form</field>
        <field name="model">sh.employee.task.allocation.wizard</field>
        <field name="arch" type="xml">
            <form string="Task Assignment">
                <group>
                    <group style="align-items: center;">
                        <field name="sh_employee_id" options="{'no_create': True, }"/>
                        <!-- <field name="sh_department_id" options="{'no_create': True, }"/> -->
                        <field name="user_id" readonly="1"/>
                        <field name="sh_project_id" domain="[('sh_child_ids', '=', False)]" options="{'no_create': True, }" required="1"/>
                        <field name="sh_task_id" options="{'no_create': True, }"/>
                        <field name="sh_remarks" />
                    </group>
                    <group style="align-items: center;">
                        <field name="sh_responsible_tl_id" options="{'no_create': True,}" force_save="1"/>
                        <field name="sh_responsible_tl_ids"  widget="many2many_tags" options="{'no_create': True, }" readonly="1" force_save="1"/>
                        <label for="from_date" string="Date"/>
                        <div name="dates" class="o_row">
                            <field name="from_date" widget="daterange" required="1" options="{&quot;related_end_date&quot;: &quot;to_date&quot;}"/>
                            <i class="fa fa-long-arrow-right mx-2 oe_edit_only" aria-label="Arrow icon" title="Arrow"/>
                            <i class="fa fa-long-arrow-right mx-2 oe_read_only" aria-label="Arrow icon" title="Arrow" attrs="{'invisible': [('from_date', '=', False), ('to_date', '=', False)]}"/>
                            <field name="to_date" widget="daterange" required="1" options="{&quot;related_start_date&quot;: &quot;from_date&quot;}"/>
                        </div>
                        <field name="sh_priority"/>
                        <field name="allocated_hours" widget="float_time"/>
                    </group>
                </group>
                <notebook>
                    <page name="existing_allocations" string="Employee Existing Allocations">
                        <field name="existing_allocation_ids" widget="one2many" mode="tree">
                            <tree no_open="1">
                                <field name="sh_employee_id"/>
                                <field name="sh_project_id"/>
                                <field name="sh_task_id"/>
                                <field name="sh_responsible_tl_id" />
                                <field name="sh_priority"/>
                                <field name="from_date"/>
                                <field name="to_date"/>
                                <field name="allocated_hours" widget="float_time"/>
                                <field name="state" decoration-info="state == 'draft'" 
                                    decoration-warning="state == 'waiting'" 
                                    decoration-success="state == 'done'" 
                                    decoration-danger="state == 'reject'" 
                                    decoration-muted="state == 'cancel'" 
                                    widget="badge"/>
                            </tree>
                        </field>                            
                    </page>
                </notebook>
                <footer>
                    <button name="create_emp_task_allocation" class="btn btn-primary" type="object" string="Create" />
                    <button string="Cancel" special="cancel" />
                </footer>
            </form>
        </field>
    </record>

</odoo>