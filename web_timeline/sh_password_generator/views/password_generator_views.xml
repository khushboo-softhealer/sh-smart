<?xml version="1.0" ?>
<odoo>
	<record id="view_password_generator_form" model="ir.ui.view">
		<field name="name">password.generator.form</field>
		<field name="model">password.generator</field>
		<field name="arch" type="xml">
			<form string="Password Generator">
				<sheet>
					<group>

						<label for="title" string="Title" style="font-weight:bold"/>
						<div>
							<field name="title" nolabel="1"/>
						</div>
						<group>
							<field name="title" invisible="1"/>
						</group>

						<group>
							<!-- <field name="title"/> -->
							<label for="username" string="User name"/>
							<div class="o_address_format" id="myinput">
								<field name="username" class="o_address_city"  force_save="1"/>
								<!-- <button name="action_get_username" type="object" class="btn btn-sm btn-link mb4 fa fa-clipboard copy-to-clipboard" /> -->
								<a onclick="myFunction()" title="button" role="button" class="btn btn-sm btn-link mb4 fa fa-clipboard sh_copy"/>
								<script>
									function myFunction() {
										var textarea = document.createElement('textarea');
										textarea.id = 't';
										textarea.style.height = 0;
										document.body.appendChild(textarea);
										textarea.value = document.getElementById("username").value;
										var selector = document.querySelector('#t');
										selector.select();
										document.execCommand('copy');
										document.body.removeChild(textarea);
									}
								</script>

							</div>

							<label for="password" string="Password"/>
							<div class="o_address_format" id="myinput_passwd">
								<field name="password" password="True" class="o_address_city edit_only"/>
								<button name="action_password_wizard" title="button" type="object" class="btn btn-sm btn-link mb4 fa fa-undo" />

							</div>

							<label for="confirm_password" string="Confirm Password"/>
							<div class="o_address_format">
								<field name="confirm_password" password="True" class="o_address_city"/>
							</div>


							<label for="decrypt_password" string="Decrypt Password"/>
							<div class="o_address_format" id="myinput_decrypt_password">
								<field name="decrypt_password" readonly="1" force_save="1" password="True" class="o_address_city" attrs="{'invisible': [('is_password', '=', True)]}"/>
								<field name="sh_password" class="o_address_city" attrs="{'invisible': [('is_password', '=', False)]}"/>
								<!-- <button name="tets"  title="button" class="btn btn-sm btn-link mb4 fa fa-clipboard sh_copy"/> -->
								<a onclick="myFunction_decrypt_password()" title="button" role="button" class="btn btn-sm btn-link mb4 fa fa-clipboard sh_copy" enabled="enabled"></a>

								<script>
									$(document).ready(function() {
										$('.sh_copy').removeAttr('disabled');
									});

									function myFunction_decrypt_password() {
										var textarea = document.createElement('textarea');
										textarea.id = 't';
										textarea.style.height = 0;
										document.body.appendChild(textarea);
										textarea.value = document.getElementById("myinput_decrypt_password").innerText;
										var selector = document.querySelector('#t');
										selector.select();
										document.execCommand('copy');
										document.body.removeChild(textarea);
										return;
									}
								</script>
								<button name="action_copy_password" title="button" type="object" class="btn btn-sm btn-link mb4 fa fa-eye" />
							</div>



							<field name="password_strength" widget="priority" readonly="1" force_save="1"/>
							<field name="is_password" invisible="1"/>
							<field name="create_date" string="Pass. Created On"/>
						</group>
						<group>
							<!-- <field name="ip" /> -->
							<label for="ip" string="IP"/>
							<div class="o_address_format" id="myinput_ip">
								<field name="ip" class="o_address_city" force_save="1"/>
								<a onclick="myFunction_ip()" title="button" role="button" class="btn btn-sm btn-link mb4 fa fa-clipboard sh_copy"/>
								<script>

								function myFunction_ip() {
									var textarea = document.createElement('textarea');
										textarea.id = 't';
										textarea.style.height = 0;
										document.body.appendChild(textarea);
										textarea.value = document.getElementById("ip").value;
										var selector = document.querySelector('#t');
										selector.select();
										document.execCommand('copy');
										document.body.removeChild(textarea);
									}
								</script>
							</div>

							<label for="url" string="Url"/>
							<div class="o_address_format" id="myinput_url">
								<field name="url" widget='url' class="o_address_city" force_save="1"/>
								<button name="action_url_link" type="object" title="button" class="btn btn-sm btn-link mb4 fa fa-external-link" />
								<a onclick="myFunction_url()" title="button" role="button" class="btn btn-sm btn-link mb4 fa fa-clipboard sh_copy"/>
								<script>

								function myFunction_url() {
									var textarea = document.createElement('textarea');
										textarea.id = 't';
										textarea.style.height = 0;
										document.body.appendChild(textarea);
										textarea.value = document.getElementById("url").value;
										var selector = document.querySelector('#t');
										selector.select();
										document.execCommand('copy');
										document.body.removeChild(textarea);
									}
								</script>
							</div>

							<field name="server_tags" widget="many2many_tags"/>
							<field name="partner_id" options="{'no_create': True, 'no_open': True}" />
							<field name="writepass_date" string="Pass. Updated On"/>
						</group>
					</group>
					<group>
						<group>
							<field name="note"/>
						</group>
					</group>

				</sheet>
				<div class="oe_chatter">
					<field name="message_follower_ids" widget="mail_followers"/>
					<field name="message_ids" widget="mail_thread"/>
				</div>
			</form>
		</field>
	</record>

	<record id="view_password_generator_tree" model="ir.ui.view">
		<field name="name">password.generator.tree</field>
		<field name="model">password.generator</field>
		<field name="arch" type="xml">
			<tree string="Password Generator">
					<field name="title" />
					<field name="username" />
					<field name="password" password="True" invisible="1"/>
					<field name="confirm_password" password="True" invisible="1"/>
					<field name="ip" />
					<field name="url" widget='url' />
					<field name="email" invisible="1"/>
					<field name="phone" invisible="1"/>
					<field name="create_date" string="Pass. Created On"/>
					<field name="writepass_date" />
					<field name="partner_id" />
				</tree>
		</field>
	</record>

	<record id="view_password_generator_search_inherit" model="ir.ui.view">
		<field name="name">Password Generator Search</field>
		<field name="model">password.generator</field>
		<field name="arch" type="xml">
			<search string="Password Generator Search">
				<field name="create_date"/>
				<separator/>

				<filter string="Pass. Created On" name="today" date="create_date"/>
				<filter string="Pass. Updated On" name="pass_update" date="writepass_date"/>
				<separator/>

				<filter string="Password not updated from year" name="not_last_year" domain="[('writepass_date','&lt;',(context_today()-relativedelta(year=1)).strftime('%%Y-%%m-01'))]"/>
				<filter string="Password not updated from month" name="not_last_month" domain="[('writepass_date','&lt;',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
				<filter string="Password not updated from week" name="not_last_days" domain="[('writepass_date','&lt;',(context_today()-relativedelta(weeks=1,weekday=6)).strftime('%%Y-%%m-%%d'))]"/>
				<filter string="Password not updated from yesterday" name="not_last_yesterday" domain="[('writepass_date','&lt;',(context_today()-relativedelta(days=1)).strftime('%%Y-%%m-%%d'))]"/>

				<!-- <filter string="Password not updated from year" name="not_last_year" domain="[(datetime.datetime.now() - datetime.timedelta(days=365), '&gt;', 'writepass_date')]"/>
				<filter string="Password not updated from month" name="not_last_month" domain="[(datetime.datetime.now() - datetime.timedelta(days=30), '&gt;', 'writepass_date')]"/>
				<filter string="Password not updated from week" name="not_last_days" domain="[(datetime.datetime.now() - datetime.timedelta(days=7), '&gt;', 'writepass_date')]"/>
				<filter string="Password not updated from yesterday" name="not_last_yesterday" domain="[(datetime.datetime.now() - datetime.timedelta(days = 1), '&gt;', 'writepass_date')]"/>
					-->
				<!-- <filter string="Today no Pass. Updated On"
					name="today"
					domain="[('writepass_date', '&gt;=', datetime.datetime.now().strftime('%m/%d/%Y 00:00:00')),
					('writepass_date', '&lt;=', datetime.datetime.now().strftime('%m/%d/%Y 23:59:59'))]"/>

				<filter string="Previous Week" name="prev_week"
			domain="[('date_order', '&gt;=', ((context_today()+relativedelta(weeks=-2, weekday=0)).strftime('%Y-%m-%d'))),('date_order', '&lt;=', ((context_today()+relativedelta(weeks=-1,weekday=6)).strftime('%Y-%m-%d')))]"/>

					<filter string="Yesterday no Pass. Updated On"
						name="Yesterday"
						domain="[('writepass_date','&gt;=', ((context_today()+datetime.timedelta(days=-1)).strftime('%Y-%m-%d'))), ('writepass_date','&lt;=', ((context_today()+datetime.timedelta(days=-1)).strftime('%Y-%m-%d')))]"
						help="Yesterday"/>

				<filter string="Previous Month no Pass. Updated On"
					name="prev_month"
					domain="[('writepass_date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')),('writepass_date','&lt;',time.strftime('%%Y-%%m-01'))]"/>

				<filter string="Previous Year no Pass. Updated On"
					name="prev_month"
					domain="[('writepass_date','&gt;=',(context_today()-relativedelta(year=1)).strftime('%%Y-%%m-01')),('writepass_date','&lt;',time.strftime('%%Y-%%m-01'))]"/>
							-->

				<group expand="0" string="Group By">
					<filter name="group_by_url" domain="[]" string="Url" context="{'group_by':'url'}"/>
					<filter name="group_by_ip" domain="[]" string="IP" context="{'group_by':'ip'}"/>
					<filter name="group_by_user_name" domain="[]" string="User name" context="{'group_by':'username'}"/>
					<filter name="group_by_partner_id" domain="[]" string="Partner" context="{'group_by':'partner_id'}"/>
					<filter name="group_by_create_date" domain="[]" string="Pass. Created On" context="{'group_by':'create_date'}"/>
					<filter name="group_by_writepass_date" domain="[]" string="Pass. Updated On" context="{'group_by':'writepass_date'}"/>
					<separator/>
					<filter name="group_by_not_last_year" string="Password not updated from year" domain="[]" context="{'group_by':'writepass_date:year'}"/>
					<filter name="group_by_not_last_month" string="Password not updated from month" domain="[]" context="{'group_by':'writepass_date:month'}"/>
					<filter name="group_by_not_last_days" string="Password not updated from week" domain="[]" context="{'group_by':'writepass_date:week'}"/>
					<filter name="group_by_not_last_yesterday" string="Password not updated from yesterday" domain="[]" context="{'group_by':'writepass_date:day'}"/>

				</group>
			</search>
		</field>
	</record>


	<record id="action_password_generator" model="ir.actions.act_window">
		<field name="name">Password Generator</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">password.generator</field>
		<field name="view_mode">tree,form</field>
		<field name="context">{}</field>
		<field name="domain">[]</field>
	</record>

	<menuitem id="password_generator_menu_root" name="Password" active="True" sequence="7"/>
	<menuitem id="password_menu" name="Password" parent="password_generator_menu_root" sequence="2"/>

	<menuitem id="menu_password_generator" name="Password Generator" groups="sh_password_generator.group_password_user" action="action_password_generator" parent="password_menu" sequence="4"/>

</odoo>
