<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="sh_replied_status_form_view" model="ir.ui.view">
        <field name="name">sh.replied.status</field>
        <field name="model">sh.replied.status</field>
        <field name="arch" type="xml">
            <form string="Replied Status">
                <group>
                    <group>
                        <field name="name"/>
                        <field name="sh_customer_replied" invisible="1"/>
                        <field name="sh_staff_replied" invisible="1"/>
                        <field name="sh_running" invisible="1"/>
                        <field name="sh_closed" invisible="1"/>
                    </group>
                </group>
            </form>
        </field>
    </record> 
    <record id="sh_replied_status_tree_view" model="ir.ui.view">
        <field name="name">sh.replied.status</field>
        <field name="model">sh.replied.status</field>
        <field name="arch" type="xml">
            <tree string="Replied Status">
                <field name="sequence" widget="handle"/>
                <field name="name"/>
            </tree>
        </field>
    </record>
    <record id="sh_replied_status_action" model="ir.actions.act_window">
        <field name="name">Replied Status</field>
        <field name="res_model">sh.replied.status</field>
        <!-- <field name="type">ir.actions.act_window</field> -->
        <field name="view_mode">tree,form</field>
    </record>
    <menuitem id="sh_replied_status_menu" name="Replied Status" parent="sale.menu_sale_config" action="sh_replied_status_action"/>
    <record id="sh_so_replied_status_form_view" model="ir.ui.view">
        <field name="name">sale.order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <field name="payment_term_id" position="after">
                <field name="sh_replied_status_id" options="{'clickable':'1','no_create_edit': True}" />
                <field name="sh_replied_status" options="{'clickable':'1'}" statusbar_visible="staff_replied,customer_replied,running,closed" invisible="1"/>
            </field>
        </field>
    </record>
    <record id="sh_so_replied_status_tree_view" model="ir.ui.view">
        <field name="name">sale.order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_quotation_tree"/>
        <field name="arch" type="xml">
            <field name="state" position="after">
                <field name="sh_replied_status_id"/>
                <field name="sh_replied_status" invisible="1"/>
            </field>
        </field>
    </record>
    <record id="sh_so_replied_order_status_tree_view" model="ir.ui.view">
        <field name="name">sale.order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">
            <field name="invoice_status" position="after">
                <field name="sh_replied_status_id"/>
                <field name="sh_replied_status" invisible="1"/>
            </field>
        </field>
    </record>
    <record id="sh_so_replied_status_search_view" model="ir.ui.view">
        <field name="name">sale.order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sales_order_filter"/>
        <field name="arch" type="xml">
            <filter name="my_sale_orders_filter" position="after">
                <filter string="Staff Replied" domain="[('sh_replied_status_id.sh_staff_replied','=',True)]" name="staff_replied_order"/>
                <filter string="Customer Replied" domain="[('sh_replied_status_id.sh_customer_replied','=',True)]" name="customer_replied_order"/>
                <filter string="Running" domain="[('sh_replied_status_id.sh_running','=',True)]" name="running_order"/>
                <filter string="Closed" domain="[('sh_replied_status_id.sh_closed','=',True)]" name="closed_order"/>
                <filter string="24 Hours"  name="24_hours" 
                        domain="[('write_date','&gt;=', ((context_today()+datetime.timedelta(days=-1)).strftime('%Y-%m-%d'))), ('write_date','&lt;=', ((context_today()+datetime.timedelta(days=-1)).strftime('%Y-%m-%d')))]"
                        help="24 Hours"/>
                <filter string="48 Hours"  name="48_hours" 
                        domain="[('write_date','&gt;=', ((context_today()+datetime.timedelta(days=-2)).strftime('%Y-%m-%d'))), ('write_date','&lt;=', ((context_today()+datetime.timedelta(days=-2)).strftime('%Y-%m-%d')))]"
                        help="48 Hours"/>
                <filter string="72 Hours"  name="72_hours" 
                        domain="[('write_date','&gt;=', ((context_today()+datetime.timedelta(days=-3)).strftime('%Y-%m-%d'))), ('write_date','&lt;=', ((context_today()+datetime.timedelta(days=-3)).strftime('%Y-%m-%d')))]"
                        help="48 Hours"/>
            </filter>
            <filter name="order_month" position="after">
                <filter string="Replied Status" name="sh_reply_stat" domain="[]" context="{'group_by':'sh_replied_status_id'}"/>
            </filter>
        </field>
    </record>
    <record id="sh_so_replied_status_kanban_view" model="ir.ui.view">
        <field name="name">sale.order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_sale_order_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="sh_replied_status_id" invisible="1"/>
                <field name="sh_replied_status" invisible="1"/>
                <field name="responsible_user_id"/>
                <field name="sh_responsible_user_ids"/>
                <field name="responsible_user_names"/>
            </xpath>
            <xpath expr="//kanban" position="attributes">
                <attribute name="default_group_by">sh_replied_status_id</attribute>                
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_bottom_left')]" position="inside">
                        <t t-foreach="record.sh_responsible_user_ids.raw_value" t-as="runner">
                            <img t-att-src="kanban_image('res.users', 'image_small', runner)" t-att-title="record.responsible_user_names.raw_value" t-att-alt="runner" width="24" height="24" class="oe_kanban_avatar" />
                        </t>
                        <img t-att-src="kanban_image('res.users', 'image_small', record.responsible_user_id.raw_value)" t-att-title="record.responsible_user_id.value" t-att-alt="record.responsible_user_id.value" width="24" height="24" class="oe_kanban_avatar"/>
            </xpath>
            <xpath expr="//div[hasclass('oe_kanban_bottom_right')]" position="replace">
               <div name="state" class="o_field_widget o_readonly_modifier o_field_label_selection">
                    <span class="badge text-bg-primary">
                        <field name="sh_replied_status_id"/>
                    </span>
                </div>
            </xpath>
        </field>
    </record>
    <record id="sale.sale_order_action_view_quotation_kanban" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">kanban</field>
        <field name="view_id" ref="sale.view_sale_order_kanban"/>
        <field name="act_window_id" ref="sale.action_quotations"/>
    </record>
    <record id="sale.sale_order_action_view_quotation_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="sale.view_quotation_tree"/>
        <field name="act_window_id" ref="sale.action_quotations"/>
    </record>
    
    <record id="sale.sale_order_action_view_order_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="sale.view_order_tree"/>
        <field name="act_window_id" ref="sale.action_orders"/>
    </record>

    <record id="sale.sale_order_action_view_order_kanban" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">kanban</field>
        <field name="view_id" ref="sale.view_sale_order_kanban"/>
        <field name="act_window_id" ref="sale.action_orders"/>
    </record>
    
</odoo>