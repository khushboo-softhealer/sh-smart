<?xml version="1.0"?>
<odoo>
    <!--Sh complain Object views and action -->
    <record id="sh_complain_form_view" model="ir.ui.view">
        <field name="name">sh.complain.form</field>
        <field name="model">sh.complain</field>
        <field name="arch" type="xml">
            <form string="Complain">
                <header>
                    <button name="new_complain_button" type="object" states="new" string="Post Complain" class="oe_highlight" />
                    <button name="resolve_button" string="Resolve" type="object" class="oe_highlight" attrs="{'invisible':['|',('is_resolve','=',True),('state','!=', 'waiting')]}" />
                    <button name="refuse_button" string="Refuse" type="object" class="oe_highlight" attrs="{'invisible':['|',('is_resolve','=',True),('state','!=', 'waiting')]}" />
                    <button name="close_button" string="Close" type="object" states="resolve" class="oe_highlight" />
                    <button name="reset_to_draft_button" string="Reset To Draft" type="object" states="refused,closed" class="oe_highlight" />
                    <field name="state" widget="statusbar" statusbar_visible="new,waiting,resolve,refused,closed" readonly="1" />
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1" />
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="subject" attrs="{'readonly':[('state','!=','new')]}" required="True" />
                            <field name="complain_category" attrs="{'readonly':[('is_category_editable','=',False)]}" required="True" options="{'no_create': True, 'no_open':True,'no_create_edit':True}" />
                            <field name="create_date" attrs="{'readonly':[('state','!=','new')]}" />
                            <field name="is_editable" invisible="1" />
                            <field name="is_category_editable" invisible="1" />
 
                        </group>
                        <group>
                            <field name="created_by" attrs="{'readonly':[('state','!=','new')]}" readonly="1" required="True" />
                            <field name="resp_persons" widget="many2many_tags" attrs="{'readonly':[('state','!=','new'),('is_editable','!=',True)]}" required="True" />
                            <field name="has_effect_on" widget="many2many_tags" attrs="{'readonly':[('state','!=','new')]}" required="True" />
                            <field name="is_resolve" invisible="1" />
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company" attrs="{'readonly':[('state','!=','new')]}" />
                        </group>
                    </group>
                    <group>
                        <field name="description" string="Description" attrs="{'readonly':[('state','!=','new')]}" />
                    </group>
                    <notebook>
                        <page string="Resolve Comment" name="resolved_page" attrs="{'invisible':[('state','not in',['resolve','closed'])]}">
                            <group>
                                <group>
                                    <field name="rating" widget="priority" readonly="1" />
                                    <field name="resolved_by" readonly="1" />
                                    <field name="resolved_comment" readonly="1" />
                                </group>
                            </group>
                        </page>
                        <page string="Refused Comment" name="refused_page" attrs="{'invisible':[('state','not in',['refused'])]}">
                            <group>
                                <group>
                                    <field name="rating" widget="priority" readonly="1" />
                                    <field name="refused_by" readonly="1" />
                                    <field name="refused_comment" readonly="1" />
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="o_attachment_preview" />
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </form>
        </field>
    </record>
 
    <record id="sh_complain_tree_view" model="ir.ui.view">
        <field name="name">sh.complain.tree</field>
        <field name="model">sh.complain</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Sequence" />
                <field name="subject" />
                <field name="complain_category" />
                <field name="create_date" />
                <field name="created_by" />
                <field name="state" />
            </tree>
        </field>
    </record>
 
    <record id="sh_complain_kanban_view" model="ir.ui.view">
        <field name="name">sh.complain.kanban</field>
        <field name="model">sh.complain</field>
        <field name="arch" type="xml">
            <kanban>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="oe_kanban_card_header">
                                <div class="oe_kanban_card_title">
                                    <strong>
                                        <field name="name"/>
                                    </strong>
                                </div>
                                <div class="oe_kanban_badge oe_badge_state">
                                    <field name="state" widget="badge"/>
                                </div>
                            </div>
                            <div class="oe_kanban_card_content">
                                <strong>Subject :</strong>
                                <field name="subject" class="oe_kanban_subject_text"/>
                                <div class="oe_kanban_category">
                                    <strong>Complain Category :</strong>
                                    <field name="complain_category"/>
                                </div>
                                <div class="oe_kanban_category">
                                    <strong>Responsible Persons :</strong>
                                    <field name="resp_persons" widget="many2many_tags"/>
                                </div>
                            </div>
                            <div class="oe_kanban_card_footer">
                                <div class="oe_kanban_date">
                                    <i class="fa fa-calendar"/>
                                    <field name="create_date"/>
                                </div>
                                <div class="oe_kanban_author">
                                    <i class="fa fa-user"/>
                                    <field name="created_by"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
 
    <record id="sh_complain_search_views" model="ir.ui.view">
        <field name="name">sh.complain.search</field>
        <field name="model">sh.complain</field>
        <field name="arch" type="xml">
            <search string="Complain">
                <field name="name" string="Search by Complain Ref"/>
                <field name="subject" string="Search by Subject"/>
                <field name="complain_category" string="Search by Complain Category"/>
                <field name="created_by" string="Search by Creator"/>
                <field name="create_date" string="Search by Date"/>
                <field name="resp_persons" string="Search by Responsible Persons"/>
                <field name="description" string="Search by Description"/>
                <field name="rating" string="Search by Rating"/>
                <filter string="To resolve Complain" name="to_app_complain" domain="[('state', '=', 'waiting')]" />
                <filter string="Resolved Complain" name="app_complain" domain="[('state','=','resolve')]" />
                <filter string="Refused Complain" name="refused" domain="[('state','=','refused')]" />
                <filter string="Closed Complain" name="closed" domain="[('state','=','closed')]" />
                <separator />
                <group expand="0" string="Group by...">
                    <filter string="State" name="State" context="{'group_by': 'state'}" />
                    <filter string="Sequence" name="name" context="{'group_by': 'name'}" />
                    <filter string="Subject" name="subject" context="{'group_by': 'subject'}" />
                    <filter string="Complain Categories" name="complain_category" context="{'group_by': 'complain_category'}" />
                    <filter string="Created Date" name="create_date" context="{'group_by': 'create_date'}" />
                    <filter string="Created By" name="created_by" context="{'group_by': 'created_by'}" />
                    <filter string="Responsible Persons" name="resp_persons" context="{'group_by': 'resp_persons'}" />
                    <filter string="Has Effect On" name="has_effect_on" context="{'group_by': 'has_effect_on'}" />
                    <filter string="Rating" name="rating" context="{'group_by': 'rating'}" />
                    <filter string="Resolved By" name="resolved_by" context="{'group_by': 'resolved_by'}" />
                    <filter string="Resolved Comment" name="resolved_comment" context="{'group_by': 'resolved_comment'}" />
                </group>
                <separator />
                <filter string="Created Today" name="created_today" domain="[('create_date', '=', context_today())]" />
            </search>
        </field>
    </record>
 
 
    <record id="sh_complain_view_actions" model="ir.actions.act_window">
        <field name="name">Complain</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">sh.complain</field>
        <field name="view_mode">tree,form,kanban,search</field>
    </record>
</odoo>
 