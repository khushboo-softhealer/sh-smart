<?xml version="1.0"?>
<odoo>
    <!--Sh Idea Object views and action -->
    <record id="sh_idea_form_view" model="ir.ui.view">
        <field name="name">sh.idea.form</field>
        <field name="model">sh.idea</field>
        <field name="arch" type="xml">
            <form string="Idea">
                <header>
                    <button name="new_idea_button" type="object" states="new" string="Post Idea" class="oe_highlight" />
                    <button name="approve_button" string="Approve" type="object" class="oe_highlight" attrs="{'invisible':['|',('is_approve','=',True),('state','!=', 'waiting')]}" />
                    <button name="refuse_button" string="Refuse" type="object" class="oe_highlight" attrs="{'invisible':['|',('is_approve','=',True),('state','!=', 'waiting')]}" />
                    <button name="close_button" string="Close" type="object" states="approve" class="oe_highlight" />
                    <button name="reset_to_draft_button" string="Reset To Draft" type="object" states="refused,closed" class="oe_highlight" />
                    <field name="state" widget="statusbar" statusbar_visible="new,waiting,approve,refused,closed" readonly="1" />
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1" />
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="subject" attrs="{'readonly':[('state','!=','new')]}" required="True" />
                            <field name="idea_category" attrs="{'readonly':[('is_category_editable','=',False)]}" required="True" options="{'no_create': True, 'no_open':True,'no_create_edit':True}" />
                            <field name="create_date" attrs="{'readonly':[('state','!=','new')]}" />
                        </group>
                        <group>
                            <field name="created_by" attrs="{'readonly':[('state','!=','new')]}" readonly="1" required="True" />
                            <field name="resp_persons" widget="many2many_tags" attrs="{'readonly':[('state','!=','new'),('is_editable','!=',True)]}"  required="True" />
                            <field name="is_approve" invisible="1" />
                            <field name="is_editable" invisible="1" />
                            <field name="is_category_editable" invisible="1" />
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company" attrs="{'readonly':[('state','!=','new')]}" />
                        </group>
                    </group>
                    <group>
                        <field name="description" string="Description" attrs="{'readonly':[('state','!=','new')]}" />
                    </group>
                    <notebook>
                        <page string="Approved" name="approved_page" attrs="{'invisible':[('state','not in',['approve','closed'])]}">
                            <group>
                                <group>
                                    <field name="rating" widget="priority" readonly="1" />
                                    <field name="approved_by" readonly="1" />
                                    <field name="approved_comment" readonly="1" />
                                </group>
                            </group>
                        </page>
                        <page string="Refused" name="refused_page" attrs="{'invisible':[('state','not in',['refused'])]}">
                            <group>
                                <group>
                                    <field name="rating" widget="priority" readonly="1" />
                                    <field name="refused_by" readonly="1" />
                                    <field name="refused_comment" readonly="1" />
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="o_attachment_preview" />
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </form>
        </field>
    </record>
 
    <record id="sh_idea_tree_view" model="ir.ui.view">
        <field name="name">sh.idea.tree</field>
        <field name="model">sh.idea</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Sequence" />
                <field name="subject" />
                <field name="idea_category" />
                <field name="create_date" />
                <field name="created_by" />
                <field name="state" />
            </tree>
        </field>
    </record>
 
    <record id="sh_idea_kanban_view" model="ir.ui.view">
        <field name="name">sh.idea.kanban</field>
        <field name="model">sh.idea</field>
        <field name="arch" type="xml">
            <kanban>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_card oe_kanban_global_click">
                            <div class="oe_kanban_card_header">
                                <div class="oe_kanban_card_title">
                                    <strong>
                                        <field name="name"/>
                                    </strong>
                                </div>
                                <div class="oe_kanban_badge oe_badge_state">
                                    <field name="state" widget="badge"/>
                                </div>
                            </div>
                            <div class="oe_kanban_card_content">
                                <strong>Subject :</strong>
                                <field name="subject" class="oe_kanban_subject_text"/>
                                <div class="oe_kanban_category">
                                    <strong>Idea Category :</strong>
                                    <field name="idea_category"/>
                                </div>
                                <div class="oe_kanban_category">
                                    <strong>Responsible Persons :</strong>
                                    <field name="resp_persons" widget="many2many_tags"/>
                                </div>
                            </div>
                            <div class="oe_kanban_card_footer">
                                <div class="oe_kanban_date">
                                    <i class="fa fa-calendar"/>
                                    <field name="create_date"/>
                                </div>
                                <div class="oe_kanban_author">
                                    <i class="fa fa-user"/>
                                    <field name="created_by"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
 
    <record id="sh_idea_search_views" model="ir.ui.view">
    <field name="name">sh.idea.search</field>
    <field name="model">sh.idea</field>
    <field name="arch" type="xml">
        <search string="Idea">
            <field name="name" string="Search by Idea Ref"/>
            <field name="subject" string="Search by Subject"/>
            <field name="idea_category" string="Search by Idea Category"/>
            <field name="description" string="Search by Description"/>
            <field name="create_date" string="Search by Create Date"/>
            <field name="created_by" string="Search by Creator"/>
            <field name="resp_persons" string="Search by Responsible Persons"/>
            <field name="rating" string="Search by Rating"/>
 
            <filter string="New Ideas" name="new_ideas" domain="[('state', '=', 'new')]" />
            <filter string="To Approve Ideas" name="to_app_ideas" domain="[('state', '=', 'waiting')]" />
            <filter string="Approved Ideas" name="app_ideas" domain="[('state', '=', 'approve')]" />
            <filter string="Refused Ideas" name="refused_ideas" domain="[('state', '=', 'refused')]" />
            <filter string="Closed Ideas" name="closed_ideas" domain="[('state', '=', 'closed')]" />
            
            <separator />
            <filter string="Created Today" name="created_today" domain="[('create_date', '=', context_today())]" />
            
            <separator />
            <group expand="0" string="Group by...">
                <filter string="State" name="group_by_state" context="{'group_by': 'state'}" />
                <filter string="Idea Category" name="group_by_idea_category" context="{'group_by': 'idea_category'}" />
                <filter string="Created By" name="group_by_created_by" context="{'group_by': 'created_by'}" />
                <filter string="Created Date" name="group_by_create_date" context="{'group_by': 'create_date'}" />
                <filter string="Rating" name="group_by_rating" context="{'group_by': 'rating'}" />
                <filter string="Responsible Persons" name="group_by_resp_persons" context="{'group_by': 'resp_persons'}" />
                <filter string="Subject" name="group_by_subject" context="{'group_by': 'subject'}" />
            </group>
        </search>
    </field>
</record>
 
 
    <record id="sh_idea_view_actions" model="ir.actions.act_window">
        <field name="name">Idea</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">sh.idea</field>
        <field name="view_mode">tree,form,kanban,search</field>
    </record>
</odoo>
 